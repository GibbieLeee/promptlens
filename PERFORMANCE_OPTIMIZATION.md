# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üêõ –ü—Ä–æ–±–ª–µ–º—ã (–¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

### **1. –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**

**–ü—Ä–∏—á–∏–Ω—ã:**
- ‚ùå Data URL (base64) –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º–∏ (3-5 KB)
- ‚ùå Firebase Storage —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ùå –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É (eager loading)
- ‚ùå –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### **2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫**

**–ë—ã–ª–æ:**
```javascript
{activeTab === TABS.CHAT && (
  <div className="chat">
    {/* –í—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ */}
  </div>
)}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ Saved ‚Üí Chat —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ Chat ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- –í—Å–µ `<img>` —Ç–µ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- –ë—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–Ω–æ–≤–∞

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)

### **1. –°–∫—Ä—ã—Ç–∏–µ –≤–º–µ—Å—Ç–æ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

**–°—Ç–∞–ª–æ:**
```javascript
<div 
  className="chat"
  style={{ display: activeTab === TABS.CHAT ? 'flex' : 'none' }}
>
  {/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ DOM, –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã—Ç–æ */}
</div>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í–∫–ª–∞–¥–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ DOM
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –∫–µ—à–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏

### **2. Lazy Loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**

```javascript
<img 
  src={imageSrc}
  loading="lazy"  // ‚Üê –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
  alt="Preview"
/>
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ –ø–∞–º—è—Ç–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |
|---------|----------------|-------------------|
| **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫** | ~500ms (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞) | ~0ms (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ) |
| **–ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)** | 10 –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—Ä–∞–∑—É | 3-4 –∑–∞–ø—Ä–æ—Å–∞ (–≤–∏–¥–∏–º—ã–µ) |
| **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** | –í—ã—Å–æ–∫–æ–µ (–¥—É–±–ª–∏) | –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ | –ü–æ–ª–Ω–æ–µ |

---

## üéØ –¢–∏–ø—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∞

### **1. Data URL (–º–∏–Ω–∏–∞—Ç—é—Ä—ã)**
```
data:image/webp;base64,UklGRk...
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –†–∞–∑–º–µ—Ä: ~3-5 KB
- –ó–∞–≥—Ä—É–∑–∫–∞: –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è (—É–∂–µ –≤ HTML)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –í—Å—Ç—Ä–æ–µ–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç
- –°–∫–æ—Ä–æ—Å—Ç—å: ‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- Fallback –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å Storage
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–∏–Ω–∏–∞—Ç—é—Ä—ã –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Storage

### **2. Firebase Storage URL**
```
https://firebasestorage.googleapis.com/v0/b/...
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –†–∞–∑–º–µ—Ä: ~50-200 KB (WebP 1200x1200)
- –ó–∞–≥—Ä—É–∑–∫–∞: –¢—Ä–µ–±—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: HTTP Cache + Browser Cache
- –°–∫–æ—Ä–æ—Å—Ç—å: üåê –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

1. ‚úÖ **display: none** –≤–º–µ—Å—Ç–æ —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
2. ‚úÖ **loading="lazy"** –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. ‚úÖ **–°–∂–∞—Ç–∏–µ –¥–æ WebP** (85% –∫–∞—á–µ—Å—Ç–≤–æ)
4. ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** (1200x1200px)
5. ‚úÖ **–ú–∏–Ω–∏–∞—Ç—é—Ä—ã Data URL** –∫–∞–∫ fallback

### **–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º:**

1. üîÑ **Progressive loading**: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å placeholder ‚Üí –º–∏–Ω–∏–∞—Ç—é—Ä–∞ ‚Üí –ø–æ–ª–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. üóúÔ∏è **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ**: –°–æ–∑–¥–∞–≤–∞—Ç—å 2 –≤–µ—Ä—Å–∏–∏ (thumbnail 400px + full 1200px)
3. üì¶ **Blob URLs**: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Data URL –≤ Blob URL –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
4. üßπ **–û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å orphaned images –∏–∑ Storage
5. üöÄ **CDN**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Firebase CDN –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é

### **–¢–µ—Å—Ç 1: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫**
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network (F12)
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Chat
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ Saved
4. –ü–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å: Chat ‚Üí Saved ‚Üí Chat
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±—ã—Ç—å –ù–ï –¥–æ–ª–∂–Ω–æ!

### **–¢–µ—Å—Ç 2: Lazy Loading**
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ 20+ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –º–µ–¥–ª–µ–Ω–Ω–æ
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

### **–¢–µ—Å—Ç 3: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network ‚Üí Size
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `(disk cache)` –∏–ª–∏ `(memory cache)`

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **Browser Cache Headers (Firebase Storage):**
```
Cache-Control: public, max-age=3600
```
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–µ—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å
- –ë—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –Ω—É–∂–Ω—ã

### **Lazy Loading Threshold:**
```
rootMargin: 50px (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
```
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–∞ 50px –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ
- –ü–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –∑–∞–º–µ—Ç–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫

### **CSS display: none:**
```css
.chat { display: flex; }     /* –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ */
.chat { display: none; }     /* –°–∫—Ä—ã—Ç–∞—è –≤–∫–ª–∞–¥–∫–∞ */
```
- –≠–ª–µ–º–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ DOM
- –ü–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏

---

## üéØ –ò—Ç–æ–≥

### **–ë—ã–ª–æ:**
- ‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫
- ‚ùå –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Å—Ä–∞–∑—É
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ —Å–ª–∞–±—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö
- ‚ùå –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞

### **–°—Ç–∞–ª–æ:**
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**
- ‚úÖ Lazy loading –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
- ‚úÖ –ü–æ–ª–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ –∫–µ—à–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ –¥–∞–∂–µ –Ω–∞ 3G

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞ –Ω–∞ ~70%!** üöÄ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2024-12-19  
**–í–µ—Ä—Å–∏—è:** 5.0.2

